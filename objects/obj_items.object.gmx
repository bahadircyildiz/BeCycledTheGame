<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_match_items</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Items to match 
/*
  All items are instances of the same object
*/
visible = global.setup; // Hide until set up complete
image_speed = 0;
size = sprite_get_width(sprite_index);
depth = 1;
start = 1;
if(visible) {start = 0.5;}
gravity = start;
deselect = false;
matched = 0;
targetx = x;
scale = 1;
pulse = 0;
face = irandom(3);
alarm[1] = (irandom_range(4,10)*room_speed);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Hooray for special FX
if(!instance_exists(obj_message) &amp;&amp; global.setup){
  kind = choose(ef_firework,ef_ring,ef_cloud,ef_explosion);
  col = scr_get_color(image_index);
  effect_create_above(kind,x,y,1,col);
  with (obj_marker) {instance_destroy();}
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(obj_marker)) {exit;}
// Keep invisible if above playfield.
if(global.setup){
  if(instance_exists(obj_level_control)) {
    visible = y &gt; obj_level_control.y-size;
  }
}
// controls horizontal movement
if(abs(hspeed) &gt; 0){
  gravity = 0;
  vspeed = 0;
  if(position_meeting(targetx,y,obj_items)){
    x = xprevious;
  }
  if(hspeed &gt; 0){ // moving right
    if(x &gt; targetx) {
      x = targetx;
      hspeed = 0;
    }
  }
  if(hspeed &lt; 0){ // moving left
    if(x &lt; targetx) {
      x = targetx;
      hspeed = 0;
    }
  }
  // perform no more checks if moving horizontally. 
  exit;
}
if(global.clicked &gt; 0) {exit;}

// controls vertical movement (gravity)
nnn = collision_point(x,y+(size/2),obj_items,0,1);
if(nnn &gt; 0 || position_meeting(x,y+(size/2),obj_block_bottom)){
  gravity = 0;
  speed = 0;
  if(nnn &gt; 0){y = nnn.y-size;}
  move_snap(size,size);
}else{
  gravity = 1; // start;
}
// Cap vertical speed
if(vspeed &gt; 8) {vspeed = 8;}
switch (global.level){
    case 1: background_index[0] = bg_1; break;
    case 2: background_index[0] = bg_2; break;
    case 3: background_index[0] = bg_3; break;
    case 4: background_index[0] = bg_4; break;
    case 5: background_index[0] = bg_5; break;
    case 6: background_index[0] = bg_6; break;
    default: background_index[0] = bg_sky; break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Item selection
if(global.moving &gt; 0 || instance_exists(obj_message)){exit;}
// if(global.setup == false) {global.setup = true;}
if(global.clicked != noone){
  if(!instance_exists(global.clicked)){
    global.clicked = noone;
  }
  if(global.clicked == noone || global.clicked == id) {
    // No longer exists or this instance was already selected
    // Reset all items and exit
    with (obj_items){
      deselect = true;
      // pulse = 2;
    }
    exit;
  }
  // Check it is within range.
  if(distance_to_point(global.clicked.x,global.clicked.y) &gt; size){
    global.far = true;
    with (global.clicked) {deselect = true;}
    global.clicked = noone;
    global.incorrect += 1;
    if(global.incorrect &gt; 2){
      global.incorrect = 0;
      with (instance_create(0,0,obj_message)){
        msg_txt = "###Bloklar komsu olan bloklarla yer degistirebilir.##3 veya daha fazla seri yaparak yoket.## ";
        target_room = -1;
      }
    }
    exit;
  }
  // global.clicked.deselect = true;
  global.far = false; // within range
  global.moves += 1;
  global.bonus = 0;
  global.inccorect = 0;
  path_clear_points(item1_path);
  path_add_point(item1_path,x,y,100);
  path_add_point(item1_path,global.clicked.x,global.clicked.y,100);
  with (global.clicked){
    path_clear_points(item2_path);
    path_add_point(item2_path,x,y,100);
    path_add_point(item2_path,other.x,other.y,100);
    path_start(item2_path,3,0,true);
    instance_create(x,y,obj_marker);
  }
  path_start(item1_path,3,0,true);
  instance_create(x,y,obj_marker);
  exit;
}
// select this instance

global.clicked = id;
pulse = 1;
deselect = false;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>deselect = true;
if(global.clicked &gt; 0){
  if(global.clicked != id){
    // decrease swaps on no matches
    global.swaps -= 1;
  }else{
    global.clicked.deselect = true;
  }
}
path_end();
with (obj_marker) {instance_destroy();}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Should never happen but... hey ho.
with (obj_marker) {instance_destroy();}
instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(pulse &gt; 0){
  if(deselect) {pulse = 2;}
  if(pulse == 1) {// smaller
    scale -= 0.05;
    if(scale &lt; 0.4) { pulse = 2;}
  }
  if(pulse == 2){ // larger
    scale += 0.05;
    if(scale &gt; 0.99){
      if(deselect) {
        pulse = 0;
        scale = 1;
        global.clicked = noone;
      }else{
        pulse = 1; // stop pulsing
      }
    }
  }
}
draw_sprite_ext(sprite_index,image_index,x,y,scale,scale,0,c_white,1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>24,24</point>
    <point>24,24</point>
  </PhysicsShapePoints>
</object>
